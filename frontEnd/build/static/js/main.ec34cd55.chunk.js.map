{"version":3,"sources":["components/Register.js","components/Login.js","icons/onlineIcon.png","components/Chat/InfoBar/InfoBar.js","components/Chat/Chat.js","icons/closeIcon.png","components/Chat/Messages/Message/Message.js","components/Chat/Messages/Messages.js","components/Chat/Input/Input.js","components/Chat/TextContainer/TextContainer.js","components/Header.js","App.js","reportWebVitals.js","index.js"],"names":["Register","PORT","process","URL","useState","userTypeReg","setUserTypeReg","usernameReg","setUsernameReg","passwordReg","setPasswordReg","registered","setRegistered","className","onSubmit","e","preventDefault","Axios","post","userType","username","password","then","response","console","log","data","message","type","id","name","placeholder","required","onChange","target","value","selected","to","Login","setUsername","setPassword","room","setRoom","chatLink","setChatLink","onClick","alert","localStorage","setItem","JSON","stringify","token","refreshToken","infoBar","socket","src","onlineIcon","alt","removeItem","href","Message","text","user","isSentByCurrentUser","email","ReactEmoji","emojify","Messages","messages","map","i","Input","props","event","setMessage","onKeyPress","key","sendMessage","TextContainer","users","Chat","loggedIn","setLoggedIn","setEmail","setMessages","setUsers","ENDPOINT","connectionOptions","useEffect","parse","getItem","decodedToken","Decode","io","on","previousMessages","emit","off","jwt","verify","err","axios","success","headers","authorization","isAuth","handleSend","Header","path","component","exact","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ec34cd55.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport '../App.css';\r\nimport Axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nexport default function Register() {\r\n    const PORT = process.env.PORT || 3001;\r\n    const URL = `http://localhost:${PORT}`;\r\n\r\n    // register route----------------------------------------------------------------------------\r\n    const [userTypeReg, setUserTypeReg] = useState(\"\");\r\n    const [usernameReg, setUsernameReg] = useState(\"\");\r\n    const [passwordReg, setPasswordReg] = useState(\"\");\r\n\r\n    const [registered, setRegistered] = useState(\"\");\r\n\r\n\r\n    function register(e) {\r\n        e.preventDefault();\r\n\r\n        Axios.post(`${URL}/register`, {\r\n            userType: userTypeReg,\r\n            username: usernameReg,\r\n            password: passwordReg\r\n        }).then(function (response) {\r\n            console.log(response.data.message);\r\n            setRegistered(response.data.message);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"align-center form\">\r\n            <h1 className=\"mt-5\">Private Chat Room</h1>\r\n            <h3 className=\"mt-4 align-left\">Register</h3>\r\n            <form onSubmit={register}>\r\n                <select type=\"text\" id=\"userType\" className=\"form-control mt-4\" name=\"userType\" placeholder=\"User Type (Admin || Student)\" required\r\n                    onChange={(e) => {\r\n                        setUserTypeReg(e.target.value);\r\n                    }}\r\n                ><option selected>Choose User Type...</option><option value=\"Admin\">Admin</option>\r\n                    <option value=\"Student\">Student</option></select>\r\n                <input type=\"text\" id=\"login\" className=\"form-control mt-1\" name=\"username\" placeholder=\"Username...\" required\r\n                    onChange={(e) => {\r\n                        setUsernameReg(e.target.value);\r\n                    }}\r\n                />\r\n                <input type=\"password\" id=\"password\" className=\"form-control mt-1\" name=\"password\" placeholder=\"Password...\" required\r\n                    onChange={(e) => {\r\n                        setPasswordReg(e.target.value);\r\n                    }}\r\n                />\r\n                <button type=\"submit\" className=\"btn btn-success mt-4\">Register</button><span>   </span>\r\n                <Link to=\"/\">\r\n                    <button type=\"submit\" className=\"btn btn-info mt-4\">Login</button>\r\n                </Link>\r\n\r\n\r\n            </form>\r\n            {registered === \"saved\" ? <div><Link to=\"/\"><button className=\"btn btn-info mt-3\">Login to Continue</button></Link></div> : <span> </span>}\r\n            {registered === \"error\" ? <div><p className=\"errorText\">You are Already Registered!</p><Link to=\"/\"><button className=\"btn btn-info mt-3\">Click Here To Login</button></Link></div> : <span> </span>}\r\n        </div>\r\n    )\r\n}\r\n\r\n","\r\nimport React, { useState } from 'react'\r\nimport '../App.css';\r\nimport Axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Login() {\r\n    const PORT = process.env.PORT || 3001;\r\n    const URL = `http://localhost:${PORT}`;\r\n\r\n    // login route------------------------------------------------------------------------------\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [room, setRoom] = useState(\"\");\r\n    const [chatLink, setChatLink] = useState(\"\");\r\n    // const [userType, setUserType] = useState(\"\")\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        console.log(\"login is called\");\r\n        Axios.post(`${URL}/login`, {\r\n            username: username,\r\n            password: password,\r\n            room: room\r\n        }).then(function (response) {\r\n            if (response.data.message) {\r\n                console.log(response.data.message);\r\n                if (response.data.message === \"wrong password\") {\r\n                    alert(\"Try logging in with a Correct Password\");\r\n                } else {\r\n                    alert(\"Try logging in with a valid Username or Register yourself Now\");\r\n                }\r\n            }\r\n            else {\r\n                localStorage.setItem(\"token\", JSON.stringify(response.data.token));\r\n                localStorage.setItem(\"refreshToken\", JSON.stringify(response.data.refreshToken));\r\n                // setUserType(response.data.userType);\r\n                setChatLink(\"/chat\");\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"align-center form\">\r\n\r\n            <h1 className=\"mt-5\">Private Chat Room</h1>\r\n            <h3 className=\"mt-4 align-left\">Login</h3>\r\n\r\n            <form className=\"mt-4\">\r\n                <input type=\"text\" id=\"login\" className=\"form-control\" name=\"username\" placeholder=\"Username...\" required\r\n                    onChange={(e) => {\r\n                        setUsername(e.target.value);\r\n                    }}\r\n                />\r\n                <input type=\"password\" id=\"password\" className=\"form-control mt-1\" name=\"password\" placeholder=\"Password...\" required\r\n                    onChange={(e) => {\r\n                        setPassword(e.target.value);\r\n                    }}\r\n                />\r\n                <input type=\"text\" id=\"room\" className=\"form-control mt-1\" name=\"room\" placeholder=\"Room Name...\" required\r\n                    onChange={(e) => {\r\n                        setRoom(e.target.value);\r\n                    }}\r\n                />\r\n                <button type=\"submit\" className=\"btn btn-success mt-4\" onClick={handleSubmit}>Login</button><span>   </span>\r\n\r\n\r\n                <Link to=\"/register\">\r\n                    <button type=\"submit\" className=\"btn btn-info mt-4\">Register Now</button>\r\n                </Link>\r\n\r\n            </form>\r\n            {chatLink === \"/chat\"\r\n                ? <div><h3 className=\"mt-4\">Hi {username}</h3>\r\n                    <Link to={chatLink}>\r\n                        <button className=\"enterRoom btn-info mt-3 \">Enter the Room '{room}'</button>\r\n                    </Link></div>\r\n                : <span> </span>}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII=\"","import React from 'react'\r\n\r\nimport onlineIcon from '../../../icons/onlineIcon.png';\r\nimport closeIcon from '../../../icons/closeIcon.png';\r\n\r\nimport './InfoBar.css';\r\n\r\nfunction infoBar({ room }) {\r\n\r\n    function handleClick() {\r\n        localStorage.removeItem(\"token\");\r\n    }\r\n    return (\r\n        <div className=\"infoBar\">\r\n            <div className=\"leftInnerContainer\">\r\n                <img className=\"onlineIcon\" src={onlineIcon} alt=\"online\" />\r\n                <h3>{room}</h3>\r\n            </div>\r\n            <div className=\"rightInnerContainer\">\r\n                <a onClick={handleClick} href=\"/\"><img src={closeIcon} alt=\"close\" /></a>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default infoBar;\r\n\r\n","import { React, useState, useEffect } from 'react';\r\nimport io from 'socket.io-client';\r\nimport { Link } from 'react-router-dom';\r\nimport Decode from 'jwt-decode';\r\nimport jwt from 'jsonwebtoken';\r\n\r\n\r\nimport InfoBar from './InfoBar/InfoBar';\r\nimport Messages from './Messages/Messages';\r\nimport Input from './Input/Input';\r\nimport TextContainer from './TextContainer/TextContainer'\r\n\r\nimport './Chat.css';\r\nimport axios from 'axios';\r\n\r\nlet socket;\r\n\r\nfunction Chat() {\r\n\r\n    const [loggedIn, setLoggedIn] = useState(false);\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [room, setRoom] = useState(\"\");\r\n\r\n    const [message, setMessage] = useState('');\r\n    const [messages, setMessages] = useState([]);\r\n\r\n    const [users, setUsers] = useState(\"\");\r\n\r\n    const PORT = process.env.PORT || 3001;\r\n    const URL = `http://localhost:${PORT}`;\r\n    const ENDPOINT = `localhost:${PORT}`;\r\n    var connectionOptions = {\r\n        \"force new connection\": true,\r\n        \"reconnectionAttempts\": \"Infinity\",\r\n        \"timeout\": 10000,\r\n        \"transports\": [\"websocket\"]\r\n    };\r\n\r\n    //useEffect for joining the chat -----------------------------------------------------\r\n    useEffect(() => {\r\n        const token = JSON.parse(localStorage.getItem(\"token\"));\r\n        const decodedToken = Decode(token);\r\n\r\n        if (decodedToken === null) {\r\n            setLoggedIn(false);\r\n        } else {\r\n            setLoggedIn(true);\r\n            const { email, room } = decodedToken;\r\n\r\n            socket = io(ENDPOINT, connectionOptions);\r\n            setEmail(email);\r\n            setRoom(room);\r\n\r\n            socket.on(\"previousMessages\", function ({ previousMessages }) {\r\n                setMessages(...messages, previousMessages);\r\n            })\r\n\r\n            socket.emit(\"join\", { email, room }, function () { });\r\n\r\n            return (function () {\r\n                socket.emit(\"disconnect\");\r\n                socket.off();\r\n            })\r\n        }\r\n\r\n    }, [ENDPOINT]);\r\n\r\n    // useEffect for manageing meassages in chat------------------------------------------\r\n    useEffect(() => {\r\n        const token = JSON.parse(localStorage.getItem(\"token\"));\r\n        const refreshToken = JSON.parse(localStorage.getItem(\"refreshToken\"));\r\n\r\n        jwt.verify(token, \"jwtSecret\", function (err, decodedToken) {\r\n            if (err) {\r\n                axios\r\n                    .post(`${URL}/refresh`, { refreshToken: refreshToken })\r\n                    .then(function (response) {\r\n                        if (response.data.success === true) {\r\n                            localStorage.setItem(\"token\", JSON.stringify(response.data.token));\r\n                            console.log(\"new token assigned\");\r\n                        } else {\r\n                            setLoggedIn(false);\r\n                        }\r\n                    });\r\n            }\r\n        });\r\n\r\n        if (token !== null) {\r\n            socket.on(\"message\", function (message) {\r\n                setMessages([...messages, message]);\r\n            })\r\n            socket.on(\"roomData\", function ({ users }) {\r\n                setUsers(users);\r\n            })\r\n        } else {\r\n            setLoggedIn(false);\r\n        }\r\n\r\n    }, [messages])\r\n\r\n    function sendMessage(event) {\r\n        event.preventDefault();\r\n\r\n        if (message) {\r\n            handleSend(event);\r\n            socket.emit(\"sendMessage\", message, () => {\r\n                setMessage(\"\");\r\n            })\r\n        }\r\n    }\r\n\r\n    // post request on chat to save messages----------------------------------------------\r\n    function handleSend(e) {\r\n        e.preventDefault();\r\n        const token = JSON.parse(localStorage.getItem(\"token\"));\r\n        if (token) {\r\n            axios\r\n                .post(`${URL}/chat`, {\r\n                    room: room,\r\n                    email: email,\r\n                    message: message\r\n                }, {\r\n                    headers: {\r\n                        authorization: `bearer ${token}`,\r\n                    }\r\n                }).then(function (response) {\r\n                    if (response.data.isAuth === false) {\r\n                        localStorage.removeItem(\"token\");\r\n                        setLoggedIn(false);\r\n                    } else {\r\n                        console.log(response.data.message);\r\n                    }\r\n                });\r\n        } else {\r\n            setLoggedIn(false);\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            {loggedIn\r\n                ? <div><h1 className=\"mt-5 mb-5\">Private Chat Room</h1>\r\n                    <div className=\"container\">\r\n                        <InfoBar room={room} />\r\n                        <Messages messages={messages} email={email} />\r\n                        <Input setMessage={setMessage} sendMessage={sendMessage} message={message} />\r\n                    </div>\r\n                    <TextContainer users={users} /></div>\r\n                : <div>\r\n                    <h1 className=\"mt-5\">First Login to Join Chat</h1>\r\n                    <Link to=\"/\">\r\n                        <button type=\"submit\" className=\"btn-success loginbtn mt-4\">Login</button>\r\n                    </Link>\r\n                </div>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII=\"","import React from 'react';\n\nimport './Message.css';\n\nimport ReactEmoji from 'react-emoji';\n\nconst Message = ({ message: { text, user }, email }) => {\n  let isSentByCurrentUser = false;\n\n  const name = email;\n\n  if(user === name) {\n    isSentByCurrentUser = true;\n  }\n\n  return (\n    isSentByCurrentUser\n      ? (\n        <div className=\"messageContainer justifyEnd\">\n          <p className=\"sentText pr-10\">{name}</p>\n          <div className=\"messageBox backgroundBlue\">\n            <p className=\"messageText colorWhite\">{ReactEmoji.emojify(text)}</p>\n          </div>\n        </div>\n        )\n        : (\n          <div className=\"messageContainer justifyStart\">\n            <div className=\"messageBox backgroundLight\">\n              <p className=\"messageText colorDark\">{ReactEmoji.emojify(text)}</p>\n            </div>\n            <p className=\"sentText pl-10 \">{user}</p>\n          </div>\n        )\n  );\n}\n\nexport default Message;","import React from 'react';\n\nimport ScrollToBottom from 'react-scroll-to-bottom';\n\nimport Message from './Message/Message';\n\nimport './Messages.css';\n\nconst Messages = ({ messages, email }) => (\n  <ScrollToBottom className=\"messages\">\n    {messages.map((message, i) => <div key={i}><Message message={message} email={email}/></div>)}\n  </ScrollToBottom>\n);\n\nexport default Messages; ","import React from 'react';\n\nimport './Input.css';\n\nconst Input = (props) => (\n  <form className=\"formInput\">\n    <input\n      className=\"input\"\n      type=\"text\"\n      placeholder=\"Type a message...\"\n      value={props.message}\n      onChange={(event) => props.setMessage(event.target.value)}\n      onKeyPress={event => event.key === 'Enter' ? props.sendMessage(event) : null}\n    />\n    <button className=\"sendButton\" onClick={(e) => props.sendMessage(e)}>SEND</button>\n  </form>\n)\n\nexport default Input;","import React from 'react';\n\nimport onlineIcon from '../../../icons/onlineIcon.png';\n\nimport './TextContainer.css';\n\nconst TextContainer = ({ users }) => (\n  <div className=\"textContainer\">\n    {\n      users\n        ? (\n          <div>\n            <h3>People currently Online:</h3>\n            <div className=\"activeContainer\">\n              <h2>\n                {users.map(({name}) => (\n                  <div key={name} className=\"activeItem\">\n                    {name}\n                    <img alt=\"Online\" src={onlineIcon}/>\n                  </div>\n                ))}\n              </h2>\n            </div>\n          </div>\n        )\n        : null\n    }\n  </div>\n);\n\nexport default TextContainer;","import React from 'react';\r\nimport Register from './Register';\r\nimport Login from './Login'\r\nimport { BrowserRouter as Router, Route, Switch} from 'react-router-dom'\r\nimport Chat from './Chat/Chat'\r\n\r\n\r\nexport default function Header() {\r\n\r\n    return (\r\n        <div>\r\n            <header className=\"App-header\">\r\n                \r\n                <Router>\r\n                    <Switch>\r\n                        <Route path=\"/register\" component={Register} />\r\n                        <Route path=\"/\" exact component={Login} />\r\n                        <Route path=\"/chat\" exact component={Chat} />\r\n                    </Switch>\r\n                </Router>\r\n                \r\n            </header>\r\n        </div>\r\n    )\r\n}\r\n","import './App.css';\nimport Header from './components/Header';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Header />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}